# =========================================================
# FastFood Backend - Example .env
# (KHÔNG commit secrets thật vào repo)
# Copy file này thành ".env" và sửa giá trị phù hợp trước khi chạy.
# =========================================================

# -----------------------------
# Server
# -----------------------------
# Cổng backend Express (mặc định 8000)
PORT=8001
NODE_ENV=development

# -----------------------------
# PostgreSQL connection (backend sử dụng các biến DB_*)
# Nếu chạy bằng Docker Compose, DB_HOST nên là service name của Postgres (ví dụ: "postgres")
# Nếu chạy local, chuyển thành 127.0.0.1
# -----------------------------
DB_HOST=postgres
DB_PORT=5432
DB_NAME=fastfood
DB_USER=app
DB_PASSWORD=123456

# (Tuỳ chọn) Thông số dành riêng cho container Postgres trong docker-compose
# Nếu bạn dùng compose, những biến này thường được .env ở thư mục gốc đọc cho service Postgres
POSTGRES_DB=fastfood
POSTGRES_USER=app
POSTGRES_PASSWORD=123456

# -----------------------------
# Redis (rate limit OTP, tuỳ chọn)
# Docker Compose: dùng service name "redis"
# Local: đặt REDIS_URL=redis://127.0.0.1:6379
# -----------------------------
REDIS_URL=redis://redis:6379

# -----------------------------
# JWT / Auth
# -----------------------------
JWT_SECRET=supersecret
JWT_ISSUER=fastfood-app

# Logout: TTL dọn token bị revoke (ngày). index.js có job cleanup định kỳ.
REVOCATION_TTL_DAYS=7

# Refresh token TTL (ngày)
REFRESH_TOKEN_TTL_DAYS=30

# Dùng một "secret" để tạo admin ban đầu qua /setup/create-admin
# (chỉ bật khi triển khai, gọi xong nhớ tắt hoặc đổi)
ADMIN_SECRET=adminkey

# -----------------------------
# OTP Settings
# -----------------------------
# Số lần gửi OTP tối đa trong 1 "window"
OTP_LIMIT=5

# Độ dài "window" (ms). Mặc định 60000 (1 phút).
OTP_WINDOW_MS=60000

# Số lần verify tối đa trước khi bị chặn (mặc định trong code: 5)
MAX_OTP_VERIFY_ATTEMPTS=5

# Dev helper: cho phép seed nhanh & hiển thị plain OTP (CHỈ LOCAL)
ALLOW_SMOKE_SEED=true
DEBUG_SHOW_OTP=true

# Token dev để gọi /dev/last-otp từ máy không phải private IP (tuỳ chọn)
# Nếu không set, chỉ IP nội bộ/ private subnet mới gọi được.
DEV_TOKEN=dev-secret-token

# -----------------------------
# SMTP (gửi OTP email) - tuỳ chọn
# Nếu KHÔNG cấu hình SMTP, hệ thống sẽ in OTP trong console và/hoặc lưu DB (khi DEBUG_SHOW_OTP=true)
# Lưu ý: Gmail App Password KHÔNG chứa dấu cách. Nếu copy từ UI có khoảng trắng, hãy xoá hết.
# (Code đã tự loại bỏ khoảng trắng, nhưng vẫn nên nhập đúng từ đầu)
# -----------------------------
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=ptduyen2024@gmail.com
SMTP_PASS=wnvosiiuandhxrpu
SMTP_FROM=ptduyen2024@gmail.com
